"use client"

import { useEffect, useRef, useState } from "react"
import Image from "next/image"
import { cn } from "@/lib/utils"
import { ChevronDown, Target } from "lucide-react"

export default function PortfolioVertical() {
  const [activeSection, setActiveSection] = useState(0)
  const sectionRefs = [useRef(null), useRef(null), useRef(null), useRef(null)]

  // Handle scroll to update active section
  useEffect(() => {
    const handleScroll = () => {
      const pageYOffset = window.scrollY
      let newActiveSection = 0

      sectionRefs.forEach((ref, index) => {
        if (!ref.current) return
        const element = ref.current as HTMLElement
        const offsetTop = element.offsetTop
        const height = element.offsetHeight

        if (pageYOffset >= offsetTop - height / 3) {
          newActiveSection = index
        }
      })

      setActiveSection(newActiveSection)
    }

    window.addEventListener("scroll", handleScroll)
    return () => window.removeEventListener("scroll", handleScroll)
  }, [])

  // Scroll to section
  const scrollToSection = (index: number) => {
    if (!sectionRefs[index].current) return
    const element = sectionRefs[index].current as HTMLElement
    window.scrollTo({
      top: element.offsetTop,
      behavior: "smooth",
    })
  }

  return (
    <div className="relative">
      {/* Fixed navigation */}
      <nav className="fixed right-6 top-1/2 transform -translate-y-1/2 z-50 hidden md:block">
        <div className="flex flex-col space-y-4">
          {["Introduction", "Timeline", "Skills", "Goals"].map((label, index) => (
            <button
              key={index}
              onClick={() => scrollToSection(index)}
              className={cn(
                "w-3 h-3 rounded-full transition-all duration-300",
                activeSection === index
                  ? "bg-gradient-to-r from-blue-500 to-orange-500 scale-125"
                  : "bg-gray-300 hover:bg-gray-400",
              )}
              aria-label={label}
              title={label}
            />
          ))}
        </div>
      </nav>

      {/* Sections */}
      <section
        ref={sectionRefs[0]}
        className="min-h-screen flex items-center justify-center p-6 relative bg-gradient-to-br from-blue-50 to-orange-50"
      >
        <IntroductionSection />
        <ScrollIndicator onClick={() => scrollToSection(1)} />
      </section>

      <section
        ref={sectionRefs[1]}
        className="min-h-screen flex items-center justify-center p-6 relative bg-gradient-to-bl from-blue-50 to-orange-50"
      >
        <EducationSection />
        <ScrollIndicator onClick={() => scrollToSection(2)} />
      </section>

      <section
        ref={sectionRefs[2]}
        className="min-h-screen flex items-center justify-center p-6 relative bg-gradient-to-tr from-blue-50 to-orange-50"
      >
        <PersonalSkillsSection />
        <ScrollIndicator onClick={() => scrollToSection(3)} />
      </section>

      <section
        ref={sectionRefs[3]}
        className="min-h-screen flex items-center justify-center p-6 relative bg-gradient-to-br from-blue-50 to-orange-50"
      >
        <GoalsSection />
      </section>
    </div>
  )
}

function ScrollIndicator({ onClick }: { onClick: () => void }) {
  return (
    <button
      onClick={onClick}
      className="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce"
      aria-label="Scroll down"
    >
      <ChevronDown className="w-8 h-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500" />
    </button>
  )
}

function IntroductionSection() {
  return (
    <div className="relative w-full max-w-2xl mx-auto bg-white rounded-lg shadow-md overflow-hidden p-8">
      {/* Decorative wavy lines */}
      <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
        <svg
          className="absolute top-0 left-0 w-full h-full"
          viewBox="0 0 400 500"
          preserveAspectRatio="none"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <linearGradient id="introGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(59, 130, 246, 0.2)" />
            <stop offset="100%" stopColor="rgba(249, 115, 22, 0.2)" />
          </linearGradient>
          <path
            d="M0,50 C50,25 100,75 150,50 C200,25 250,75 300,50 C350,25 400,75 450,50"
            stroke="url(#introGradient1)"
            strokeWidth="1"
            vectorEffect="non-scaling-stroke"
          />
          <linearGradient id="introGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(59, 130, 246, 0.2)" />
            <stop offset="100%" stopColor="rgba(249, 115, 22, 0.2)" />
          </linearGradient>
          <path
            d="M-50,100 C0,75 50,125 100,100 C150,75 200,125 250,100 C300,75 350,125 400,100"
            stroke="url(#introGradient2)"
            strokeWidth="1"
            vectorEffect="non-scaling-stroke"
          />
        </svg>
      </div>

      <div className="relative z-10">
        <h2 className="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
          Introduction
        </h2>

        <div className="flex flex-col md:flex-row items-center gap-8">
          <div className="relative w-full max-w-[250px] aspect-[3/4]">
            <div className="absolute inset-0 rounded-md border-2 border-transparent bg-gradient-to-br from-blue-500 to-orange-500 p-[2px]">
              <div className="absolute inset-0 bg-white rounded-[5px]"></div>
            </div>
            <Image
              src="./áº£nh.jpg"
              alt="Portrait"
              fill
              className="object-cover rounded-md p-[2px]"
            />
          </div>

          <div className="flex-1">
            <p className="text-gray-600 mb-4">
              Hello, I am My. I am 19 years old, currently living and studying in Gyeonggi, South Korea.
            </p>
            <p className="text-gray-600">
              Currently, I am studying Korean at Tongwon School on a D4 visa. Now I only have a TOPIK 2 certificate. At
              the same time, I am taking a basic programming course.
            </p>

            <div className="mt-6 flex justify-center space-x-1">
              {[0, 1, 2, 3, 4].map((i) => (
                <div
                  key={i}
                  className={cn(
                    "w-2 h-2 rounded-full",
                    i === 0 ? "bg-gradient-to-r from-blue-500 to-orange-500" : "bg-gray-300",
                  )}
                />
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}

function EducationSection() {
  return (
    <div className="relative w-full max-w-2xl mx-auto bg-white rounded-lg shadow-md overflow-hidden p-8">
      {/* Decorative wavy lines */}
      <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
        <svg
          className="absolute top-0 left-0 w-full h-full"
          viewBox="0 0 400 500"
          preserveAspectRatio="none"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <linearGradient id="eduGradient1" x1="0%" y1="100%" x2="100%" y2="0%">
            <stop offset="0%" stopColor="rgba(59, 130, 246, 0.2)" />
            <stop offset="100%" stopColor="rgba(249, 115, 22, 0.2)" />
          </linearGradient>
          <path
            d="M0,50 C50,75 100,25 150,50 C200,75 250,25 300,50 C350,75 400,25 450,50"
            stroke="url(#eduGradient1)"
            strokeWidth="1"
            vectorEffect="non-scaling-stroke"
          />
          <linearGradient id="eduGradient2" x1="0%" y1="100%" x2="100%" y2="0%">
            <stop offset="0%" stopColor="rgba(59, 130, 246, 0.2)" />
            <stop offset="100%" stopColor="rgba(249, 115, 22, 0.2)" />
          </linearGradient>
          <path
            d="M-50,100 C0,125 50,75 100,100 C150,125 200,75 250,100 C300,125 350,75 400,100"
            stroke="url(#eduGradient2)"
            strokeWidth="1"
            vectorEffect="non-scaling-stroke"
          />
        </svg>
      </div>

      <div className="relative z-10">
        <h2 className="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
          Timeline
        </h2>

        <div className="space-y-8">
          {[
            {
              date: "7/2024",
              description:
                "Completed high school national exams, decided to go to South Korea and started learning Korean",
            },
            {
              date: "12/2024",
              description: "Flew to South Korea and enrolled at Tongwon School",
            },
            {
              date: "2/2025",
              description: "Became interested in and started exploring the IT field",
            },
            {
              date: "4/2025",
              description: "Joined a basic IT course",
            },
          ].map((edu, index) => (
            <div key={index} className="pb-6 pl-6 relative">
              <div className="absolute left-0 top-0 bottom-0 w-[2px] bg-gradient-to-b from-blue-400 to-orange-400" />
              <div className="absolute left-[-4px] top-0 w-[10px] h-[10px] rounded-full bg-gradient-to-r from-blue-500 to-orange-500" />
              <h3 className="font-medium text-lg mb-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
                {edu.date}
              </h3>
              <p className="text-gray-600">{edu.description}</p>
            </div>
          ))}
        </div>

        <div className="flex justify-center mt-8">
          <div className="flex items-center space-x-1">
            {[...Array(10)].map((_, i) => (
              <div
                key={i}
                className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-orange-400 transform rotate-90"
              >
                {i % 2 === 0 ? ">" : "<"}
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  )
}

function PersonalSkillsSection() {
  return (
    <div className="w-full max-w-4xl mx-auto">
      <h2 className="text-4xl font-bold mb-10 text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
        Technical Skills
      </h2>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
        {/* Development Card */}
        <div className="bg-white rounded-xl shadow-md p-8">
          <div className="flex items-center mb-6">
            <div className="mr-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              >
                <polyline points="16 18 22 12 16 6"></polyline>
                <polyline points="8 6 2 12 8 18"></polyline>
              </svg>
            </div>
            <h3 className="text-2xl font-bold text-gray-800">Development</h3>
          </div>

          <div className="space-y-6">
            <SkillBar name="Python" progress={25} status="Beginner" />
            <SkillBar name="HTML" progress={20} status="Beginner" />
          </div>
        </div>

        {/* Languages Card */}
        <div className="bg-white rounded-xl shadow-md p-8">
          <div className="flex items-center mb-6">
            <div className="mr-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              >
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
            </div>
            <h3 className="text-2xl font-bold text-gray-800">Languages</h3>
          </div>

          <div className="space-y-6">
            <SkillBar name="English" progress={40} status="Basic" />
            <SkillBar name="Korean" progress={30} status="TOPIK 2" />
          </div>
        </div>
      </div>
    </div>
  )
}

function GoalsSection() {
  return (
    <div className="relative w-full max-w-2xl mx-auto bg-white rounded-lg shadow-md overflow-hidden p-8">
      {/* Decorative elements */}
      <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
        <svg
          className="absolute top-0 left-0 w-full h-full"
          viewBox="0 0 400 500"
          preserveAspectRatio="none"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <linearGradient id="goalGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="rgba(59, 130, 246, 0.2)" />
            <stop offset="100%" stopColor="rgba(249, 115, 22, 0.2)" />
          </linearGradient>
          <circle cx="350" cy="50" r="30" stroke="url(#goalGradient1)" strokeWidth="1" />
          <circle cx="50" cy="350" r="30" stroke="url(#goalGradient1)" strokeWidth="1" />
          <circle cx="350" cy="350" r="20" stroke="url(#goalGradient1)" strokeWidth="1" />
          <circle cx="50" cy="50" r="20" stroke="url(#goalGradient1)" strokeWidth="1" />
        </svg>
      </div>

      <div className="relative z-10">
        <h2 className="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
          Future Goals
        </h2>

        <div className="space-y-6">
          <div className="bg-gradient-to-r from-blue-50 to-orange-50 rounded-lg p-6 border border-transparent">
            <div className="flex items-center mb-3">
              <Target className="w-5 h-5 mr-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500" />
              <h3 className="text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
                Short-term Goals
              </h3>
            </div>
            <ul className="list-disc list-inside space-y-2 text-gray-600">
              <li>Improve my Korean language skills to TOPIK level 6</li>
              <li>Complete the basic programming course</li>
              <li>Improve my English to follow my dream in IT</li>
            </ul>
          </div>

          <div className="bg-gradient-to-r from-blue-50 to-orange-50 rounded-lg p-6 border border-transparent">
            <div className="flex items-center mb-3">
              <Target className="w-5 h-5 mr-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500" />
              <h3 className="text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">
                Long-term Goals
              </h3>
            </div>
            <ul className="list-disc list-inside space-y-2 text-gray-600">
              <li>Pursue a degree in Computer Science or related field</li>
              <li>Become proficient in back-end</li>
              <li>Work for a technology company in South Korea</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  )
}

function SkillBar({ name, progress, status }: { name: string; progress: number; status: string }) {
  return (
    <div>
      <div className="flex justify-between mb-1">
        <span className="text-lg font-medium text-gray-700">{name}</span>
        <span
          className={`text-sm ${
            status === "Fluent"
              ? "text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500 font-semibold"
              : "text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-orange-500"
          }`}
        >
          {status}
        </span>
      </div>
      <div className="w-full bg-gray-200 rounded-full h-3">
        <div
          className="h-3 rounded-full bg-gradient-to-r from-blue-500 to-orange-500"
          style={{ width: `${progress}%` }}
        ></div>
      </div>
    </div>
  )
}
